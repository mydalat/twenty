# LEFT MENU CUSTOMIZATION GUIDE - Twenty CRM

H∆∞·ªõng d·∫´n chi ti·∫øt c√°ch custom menu b√™n tr√°i (Left Navigation Drawer) trong Twenty CRM.

---

## üìã **C·∫§U TR√öC MENU**

Menu b√™n tr√°i c√≥ **3 ph·∫ßn ch√≠nh**:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ WORKSPACE NAME              ‚îÇ ‚Üê Header
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üîç Search                   ‚îÇ ‚Üê Fixed Items (Top)
‚îÇ ‚ú® Ask AI                   ‚îÇ
‚îÇ ‚öôÔ∏è  Settings                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ OPENED                      ‚îÇ ‚Üê Scrollable Section 1
‚îÇ  üìÑ Current Object          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ FAVORITES (Optional)        ‚îÇ ‚Üê Scrollable Section 2
‚îÇ  üìÅ Folder 1                ‚îÇ
‚îÇ    üîó Favorite View 1       ‚îÇ
‚îÇ    üîó Favorite Record 1     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ WORKSPACE                   ‚îÇ ‚Üê Scrollable Section 3
‚îÇ  üë§ People                  ‚îÇ ‚Üê Standard Objects
‚îÇ  üè¢ Companies               ‚îÇ   (Fixed Order)
‚îÇ  üí∞ Opportunities           ‚îÇ
‚îÇ  ‚úÖ Tasks                   ‚îÇ
‚îÇ  üìù Notes                   ‚îÇ
‚îÇ  üì¶ Custom Object 1         ‚îÇ ‚Üê Custom Objects
‚îÇ  üì¶ Custom Object 2         ‚îÇ   (By Created Date)
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ REMOTE                      ‚îÇ ‚Üê Scrollable Section 4
‚îÇ  üîó External Table 1        ‚îÇ   (Integrations)
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚ùì Support                  ‚îÇ ‚Üê Fixed Items (Bottom)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üóÇÔ∏è **FILE STRUCTURE**

### **Frontend Components:**

```
packages/twenty-front/src/modules/navigation/components/
‚îú‚îÄ‚îÄ MainNavigationDrawer.tsx                    # Main wrapper
‚îú‚îÄ‚îÄ MainNavigationDrawerFixedItems.tsx          # Search, AI, Settings
‚îî‚îÄ‚îÄ MainNavigationDrawerScrollableItems.tsx     # Dynamic items

packages/twenty-front/src/modules/object-metadata/components/
‚îú‚îÄ‚îÄ NavigationDrawerOpenedSection.tsx                     # "Opened" section
‚îú‚îÄ‚îÄ NavigationDrawerSectionForObjectMetadataItems.tsx    # Object list renderer
‚îú‚îÄ‚îÄ NavigationDrawerItemForObjectMetadataItem.tsx        # Individual item
‚îî‚îÄ‚îÄ RemoteNavigationDrawerSection.tsx                     # Remote objects

packages/twenty-front/src/modules/favorites/components/
‚îú‚îÄ‚îÄ WorkspaceFavorites.tsx                      # Favorites section
‚îî‚îÄ‚îÄ CurrentWorkspaceMemberFavoritesFolders.tsx  # Favorites folders
```

### **Backend Models:**

```
packages/twenty-server/src/modules/
‚îú‚îÄ‚îÄ favorite/standard-objects/favorite.workspace-entity.ts
‚îú‚îÄ‚îÄ favorite-folder/standard-objects/favorite-folder.workspace-entity.ts
‚îî‚îÄ‚îÄ [object]/standard-objects/[object].workspace-entity.ts
```

---

## üéØ **4 C√ÅCH CUSTOM MENU**

---

## ‚úÖ **C√ÅCH 1: TH√äM CUSTOM OBJECT** (T·ª± ƒê·ªông Xu·∫•t Hi·ªán)

### **Khi t·∫°o custom object m·ªõi ‚Üí t·ª± ƒë·ªông xu·∫•t hi·ªán trong menu!**

### **Qua UI:**

1. V√†o **Settings ‚Üí Objects ‚Üí + New Object**
2. ƒêi·ªÅn th√¥ng tin:
   - Name Singular: `Product`
   - Name Plural: `Products`
   - Icon: `IconPackage`
   - Label Singular: `Product`
   - Label Plural: `Products`
3. Click **Save**

‚Üí **T·ª± ƒë·ªông** xu·∫•t hi·ªán trong menu section "WORKSPACE"!

### **Qua Code (Backend):**

#### **File:** `packages/twenty-server/src/modules/product/standard-objects/product.workspace-entity.ts`

```typescript
import { msg } from '@lingui/core/macro';
import { FieldMetadataType } from 'twenty-shared/types';
import { BaseWorkspaceEntity } from 'src/engine/twenty-orm/base.workspace-entity';
import { WorkspaceEntity } from 'src/engine/twenty-orm/decorators/workspace-entity.decorator';
import { WorkspaceField } from 'src/engine/twenty-orm/decorators/workspace-field.decorator';
import { STANDARD_OBJECT_IDS } from 'src/engine/workspace-manager/workspace-sync-metadata/constants/standard-object-ids';

@WorkspaceEntity({
  standardId: STANDARD_OBJECT_IDS.product, // Generate new UUID
  namePlural: 'products',
  labelSingular: msg`Product`,
  labelPlural: msg`Products`,
  description: msg`A product`,
  icon: 'IconPackage', // ‚Üê Icon hi·ªÉn th·ªã trong menu
  shortcut: 'D', // ‚Üê Keyboard shortcut (optional)
})
export class ProductWorkspaceEntity extends BaseWorkspaceEntity {
  @WorkspaceField({
    type: FieldMetadataType.TEXT,
    label: msg`Name`,
    description: msg`Product name`,
    icon: 'IconAbc',
  })
  name: string;

  @WorkspaceField({
    type: FieldMetadataType.CURRENCY,
    label: msg`Price`,
    description: msg`Product price`,
    icon: 'IconCurrencyDollar',
  })
  price: number;
}
```

#### **Sync Metadata:**

```bash
npx nx run twenty-server:command workspace:sync-metadata
```

‚Üí Object m·ªõi xu·∫•t hi·ªán trong menu!

### **V·ªã Tr√≠:**

- Standard objects (Person, Company, Opportunity, Task, Note): **Th·ª© t·ª± c·ªë ƒë·ªãnh**
- Custom objects: **S·∫Øp x·∫øp theo th·ªùi gian t·∫°o** (m·ªõi nh·∫•t ·ªü d∆∞·ªõi)

**Source:** `packages/twenty-front/src/modules/object-metadata/components/NavigationDrawerSectionForObjectMetadataItems.tsx:54-61`

```typescript
const sortedCustomObjectMetadataItems = [...objectMetadataItems]
  .filter((item) => !ORDERED_STANDARD_OBJECTS.includes(item.nameSingular))
  .sort((objectMetadataItemA, objectMetadataItemB) => {
    return new Date(objectMetadataItemA.createdAt) <
      new Date(objectMetadataItemB.createdAt)
      ? 1
      : -1;
  });
```

---

## ‚úÖ **C√ÅCH 2: REORDER STANDARD OBJECTS**

### **Thay ƒë·ªïi th·ª© t·ª± Person, Company, Opportunity, Task, Note**

#### **File:** `packages/twenty-front/src/modules/object-metadata/components/NavigationDrawerSectionForObjectMetadataItems.tsx`

**T√¨m d√≤ng 12-18:**

```typescript
const ORDERED_STANDARD_OBJECTS: string[] = [
  CoreObjectNameSingular.Person,
  CoreObjectNameSingular.Company,
  CoreObjectNameSingular.Opportunity,
  CoreObjectNameSingular.Task,
  CoreObjectNameSingular.Note,
];
```

### **Example: ƒê·ªïi th·ª© t·ª±**

```typescript
const ORDERED_STANDARD_OBJECTS: string[] = [
  CoreObjectNameSingular.Company,      // 1. Company l√™n ƒë·∫ßu
  CoreObjectNameSingular.Opportunity,  // 2. Opportunity
  CoreObjectNameSingular.Person,       // 3. Person
  CoreObjectNameSingular.Task,         // 4. Task
  CoreObjectNameSingular.Note,         // 5. Note
];
```

### **Example: Th√™m custom object v√†o fixed order**

N·∫øu b·∫°n mu·ªën Product lu√¥n ·ªü v·ªã tr√≠ c·ªë ƒë·ªãnh (kh√¥ng theo created date):

```typescript
const ORDERED_STANDARD_OBJECTS: string[] = [
  CoreObjectNameSingular.Person,
  CoreObjectNameSingular.Company,
  CoreObjectNameSingular.Opportunity,
  'product',                           // ‚Üê Th√™m custom object
  CoreObjectNameSingular.Task,
  CoreObjectNameSingular.Note,
];
```

### **Rebuild Frontend:**

```bash
npx nx build twenty-front
# ho·∫∑c restart dev server
npx nx start twenty-front
```

---

## ‚úÖ **C√ÅCH 3: TH√äM CUSTOM FIXED ITEMS** (Search, Settings, etc.)

### **Th√™m custom menu item c·ªë ƒë·ªãnh ·ªü top ho·∫∑c bottom**

#### **File:** `packages/twenty-front/src/modules/navigation/components/MainNavigationDrawerFixedItems.tsx`

**Current code (d√≤ng 38-71):**

```typescript
export const MainNavigationDrawerFixedItems = () => {
  const navigate = useNavigate();
  const { t } = useLingui();
  const isAiEnabled = useIsFeatureEnabled(FeatureFlagKey.IS_AI_ENABLED);

  return (
    !isMobile && (
      <>
        <NavigationDrawerItem
          label={t`Search`}
          Icon={IconSearch}
          onClick={openRecordsSearchPage}
          keyboard={['/']}
        />
        {isAiEnabled && (
          <NavigationDrawerItem
            label={t`Ask AI`}
            Icon={IconSparkles}
            onClick={() => openAskAIPage()}
            keyboard={['@']}
          />
        )}
        <NavigationDrawerItem
          label={t`Settings`}
          to={getSettingsPath(SettingsPath.ProfilePage)}
          onClick={() => navigate(getSettingsPath(SettingsPath.ProfilePage))}
          Icon={IconSettings}
        />
      </>
    )
  );
};
```

### **Example 1: Th√™m "Reports" item**

```typescript
import { IconChartBar } from 'twenty-ui/display';

export const MainNavigationDrawerFixedItems = () => {
  const navigate = useNavigate();
  const { t } = useLingui();
  const isAiEnabled = useIsFeatureEnabled(FeatureFlagKey.IS_AI_ENABLED);

  return (
    !isMobile && (
      <>
        <NavigationDrawerItem
          label={t`Search`}
          Icon={IconSearch}
          onClick={openRecordsSearchPage}
          keyboard={['/']}
        />
        {isAiEnabled && (
          <NavigationDrawerItem
            label={t`Ask AI`}
            Icon={IconSparkles}
            onClick={() => openAskAIPage()}
            keyboard={['@']}
          />
        )}
        {/* ‚Üê TH√äM M·ªöI */}
        <NavigationDrawerItem
          label={t`Reports`}
          Icon={IconChartBar}
          to="/reports"
          keyboard={['R']}
        />
        <NavigationDrawerItem
          label={t`Settings`}
          to={getSettingsPath(SettingsPath.ProfilePage)}
          onClick={() => navigate(getSettingsPath(SettingsPath.ProfilePage))}
          Icon={IconSettings}
        />
      </>
    )
  );
};
```

### **Example 2: Th√™m "Analytics" v·ªõi external link**

```typescript
import { IconChartLine } from 'twenty-ui/display';

<NavigationDrawerItem
  label={t`Analytics`}
  Icon={IconChartLine}
  onClick={() => window.open('https://analytics.yourcompany.com', '_blank')}
  keyboard={['A']}
/>
```

### **Example 3: Th√™m item v·ªõi badge (notification count)**

```typescript
<NavigationDrawerItem
  label={t`Notifications`}
  Icon={IconBell}
  to="/notifications"
  rightOptions={
    <Badge variant="danger" size="sm">
      5
    </Badge>
  }
/>
```

---

## ‚úÖ **C√ÅCH 4: MANAGE FAVORITES** (Qua UI ho·∫∑c API)

### **Favorites xu·∫•t hi·ªán trong menu section "WORKSPACE"**

### **4.1. Qua UI:**

#### **Favorite m·ªôt Object View:**

1. V√†o object page (e.g., `/objects/companies`)
2. Click v√†o View dropdown
3. Ch·ªçn view mu·ªën favorite
4. Click ‚≠ê icon b√™n c·∫°nh view name
5. ‚Üí View xu·∫•t hi·ªán trong menu!

#### **Favorite m·ªôt Record:**

1. V√†o record detail page (e.g., `/object/company/uuid`)
2. Click ‚≠ê icon ·ªü header
3. ‚Üí Record xu·∫•t hi·ªán trong menu!

#### **T·∫°o Favorite Folder:**

1. Right-click v√†o "FAVORITES" section
2. Click "New Folder"
3. ƒê·∫∑t t√™n folder
4. Drag & drop favorites v√†o folder

### **4.2. Qua GraphQL API:**

#### **T·∫°o Favorite:**

```graphql
mutation CreateOneFavorite($data: FavoriteCreateInput!) {
  createOneFavorite(data: $data) {
    id
    position
    viewId
    companyId
    personId
  }
}
```

**Variables:**

```json
{
  "data": {
    "position": 0,
    "viewId": "view-uuid-here",
    "forWorkspaceMemberId": "workspace-member-uuid"
  }
}
```

#### **Favorite m·ªôt Record (Company):**

```json
{
  "data": {
    "position": 0,
    "companyId": "company-uuid-here",
    "forWorkspaceMemberId": "workspace-member-uuid"
  }
}
```

#### **Delete Favorite:**

```graphql
mutation DeleteOneFavorite($id: ID!) {
  deleteOneFavorite(id: $id) {
    id
  }
}
```

#### **Reorder Favorites (Update Position):**

```graphql
mutation UpdateOneFavorite($id: ID!, $data: FavoriteUpdateInput!) {
  updateOneFavorite(id: $id, data: $data) {
    id
    position
  }
}
```

**Variables:**

```json
{
  "id": "favorite-uuid",
  "data": {
    "position": 5
  }
}
```

#### **List All Favorites:**

```graphql
query FindManyFavorites {
  favorites(orderBy: { position: AscNullsFirst }) {
    edges {
      node {
        id
        position
        viewId
        companyId
        personId
        taskId
        noteId
        opportunityId
        forWorkspaceMember {
          id
          name {
            firstName
            lastName
          }
        }
      }
    }
  }
}
```

---

## üóÇÔ∏è **FAVORITE DATABASE STRUCTURE**

### **Favorite Entity:**

**File:** `packages/twenty-server/src/modules/favorite/standard-objects/favorite.workspace-entity.ts`

```typescript
export class FavoriteWorkspaceEntity extends BaseWorkspaceEntity {
  @WorkspaceField({ type: FieldMetadataType.NUMBER })
  position: number; // ‚Üê Order trong menu

  // Relations (ch·ªâ 1 trong c√°c n√†y ƒë∆∞·ª£c set)
  @WorkspaceRelation({ type: RelationType.MANY_TO_ONE })
  forWorkspaceMember: Relation<WorkspaceMemberWorkspaceEntity>; // ‚Üê Owner

  @WorkspaceRelation({ type: RelationType.MANY_TO_ONE })
  person: Relation<PersonWorkspaceEntity> | null;

  @WorkspaceRelation({ type: RelationType.MANY_TO_ONE })
  company: Relation<CompanyWorkspaceEntity> | null;

  @WorkspaceRelation({ type: RelationType.MANY_TO_ONE })
  opportunity: Relation<OpportunityWorkspaceEntity> | null;

  @WorkspaceRelation({ type: RelationType.MANY_TO_ONE })
  task: Relation<TaskWorkspaceEntity> | null;

  @WorkspaceRelation({ type: RelationType.MANY_TO_ONE })
  note: Relation<NoteWorkspaceEntity> | null;

  @WorkspaceRelation({ type: RelationType.MANY_TO_ONE })
  dashboard: Relation<DashboardWorkspaceEntity> | null;

  @WorkspaceRelation({ type: RelationType.MANY_TO_ONE })
  favoriteFolder: Relation<FavoriteFolderWorkspaceEntity> | null;

  @WorkspaceField({ type: FieldMetadataType.UUID })
  viewId: string; // ‚Üê View favorite

  @WorkspaceDynamicRelation({ type: RelationType.MANY_TO_ONE })
  custom: Relation<CustomWorkspaceEntity>; // ‚Üê Custom object favorite
}
```

---

## üé® **ADVANCED CUSTOMIZATION**

### **1. Thay ƒë·ªïi Icon cho Standard Objects**

Kh√¥ng th·ªÉ thay ƒë·ªïi icon qua UI, ph·∫£i s·ª≠a backend entity:

#### **File:** `packages/twenty-server/src/modules/company/standard-objects/company.workspace-entity.ts`

```typescript
@WorkspaceEntity({
  standardId: STANDARD_OBJECT_IDS.company,
  namePlural: 'companies',
  labelSingular: msg`Company`,
  labelPlural: msg`Companies`,
  description: msg`A company`,
  icon: 'IconBuildingSkyscraper', // ‚Üê ƒê·ªïi icon ·ªü ƒë√¢y
  shortcut: 'C',
})
export class CompanyWorkspaceEntity extends BaseWorkspaceEntity {
  // ...
}
```

**Available icons:** https://tabler-icons.io/

**Sync metadata:**

```bash
npx nx run twenty-server:command workspace:sync-metadata
```

### **2. ·∫®n Standard Objects kh·ªèi Menu**

#### **Option A: Set isActive = false (qua database)**

```sql
UPDATE "metadata"."objectMetadata"
SET "isActive" = false
WHERE "nameSingular" = 'note';
```

‚Üí Note object bi·∫øn m·∫•t kh·ªèi menu!

#### **Option B: Filter trong frontend**

**File:** `NavigationDrawerSectionForObjectMetadataItems.tsx`

```typescript
const filteredObjectMetadataItems = objectMetadataItems.filter(
  (item) => item.nameSingular !== 'note' // ‚Üê ·∫®n Note
);
```

### **3. Th√™m Custom Section**

#### **File:** `packages/twenty-front/src/modules/navigation/components/MainNavigationDrawerScrollableItems.tsx`

**Current code:**

```typescript
export const MainNavigationDrawerScrollableItems = () => {
  return (
    <StyledScrollableItemsContainer>
      <NavigationDrawerOpenedSection />
      <CurrentWorkspaceMemberFavoritesFolders />
      <WorkspaceFavorites />
      <RemoteNavigationDrawerSection />
    </StyledScrollableItemsContainer>
  );
};
```

**Th√™m custom section:**

```typescript
import { NavigationDrawerSection } from '@/ui/navigation/navigation-drawer/components/NavigationDrawerSection';
import { NavigationDrawerItem } from '@/ui/navigation/navigation-drawer/components/NavigationDrawerItem';
import { IconTools, IconBook } from 'twenty-ui/display';

export const MainNavigationDrawerScrollableItems = () => {
  return (
    <StyledScrollableItemsContainer>
      <NavigationDrawerOpenedSection />
      <CurrentWorkspaceMemberFavoritesFolders />
      <WorkspaceFavorites />

      {/* ‚Üê CUSTOM SECTION M·ªöI */}
      <NavigationDrawerSection>
        <NavigationDrawerSectionTitle label="Tools" />
        <NavigationDrawerItem
          label="Admin Panel"
          Icon={IconTools}
          to="/admin"
        />
        <NavigationDrawerItem
          label="Documentation"
          Icon={IconBook}
          onClick={() => window.open('https://docs.yourcompany.com')}
        />
      </NavigationDrawerSection>

      <RemoteNavigationDrawerSection />
    </StyledScrollableItemsContainer>
  );
};
```

### **4. Conditional Items (Based on Permissions)**

```typescript
import { useRecoilValue } from 'recoil';
import { currentUserState } from '@/auth/states/currentUserState';

export const MainNavigationDrawerFixedItems = () => {
  const currentUser = useRecoilValue(currentUserState);
  const isAdmin = currentUser?.role === 'ADMIN';

  return (
    <>
      <NavigationDrawerItem label={t`Search`} Icon={IconSearch} />

      {/* Ch·ªâ admin m·ªõi th·∫•y */}
      {isAdmin && (
        <NavigationDrawerItem
          label={t`Admin Dashboard`}
          Icon={IconShield}
          to="/admin"
        />
      )}

      <NavigationDrawerItem label={t`Settings`} Icon={IconSettings} />
    </>
  );
};
```

---

## üîß **TROUBLESHOOTING**

### **Object m·ªõi t·∫°o kh√¥ng hi·ªán trong menu**

**Nguy√™n nh√¢n:**

- `isActive = false`
- `isSystem = true`
- Kh√¥ng c√≥ read permission

**Gi·∫£i ph√°p:**

```sql
-- Check object status
SELECT "nameSingular", "isActive", "isSystem"
FROM "metadata"."objectMetadata"
WHERE "nameSingular" = 'product';

-- Enable object
UPDATE "metadata"."objectMetadata"
SET "isActive" = true, "isSystem" = false
WHERE "nameSingular" = 'product';
```

### **Menu item kh√¥ng c√≥ icon**

**Nguy√™n nh√¢n:** Icon name kh√¥ng t·ªìn t·∫°i

**Gi·∫£i ph√°p:** Check available icons t·∫°i https://tabler-icons.io/

```typescript
icon: 'IconBuildingSkyscraper' // ‚úÖ ƒê√∫ng
icon: 'building-skyscraper'     // ‚ùå Sai (kh√¥ng c√≥ prefix Icon)
icon: 'IconInvalidName'         // ‚ùå Sai (icon kh√¥ng t·ªìn t·∫°i)
```

### **Favorites kh√¥ng hi·ªÉn th·ªã**

**Nguy√™n nh√¢n:**

- `viewId` ho·∫∑c `recordId` kh√¥ng h·ª£p l·ªá
- `forWorkspaceMemberId` sai
- Object b·ªã `isActive = false`

**Gi·∫£i ph√°p:**

```graphql
query CheckFavorites {
  favorites {
    edges {
      node {
        id
        viewId
        companyId
        forWorkspaceMember {
          id
        }
      }
    }
  }
}
```

### **Menu order kh√¥ng ƒë√∫ng**

**Nguy√™n nh√¢n:** Frontend cache ho·∫∑c stale state

**Gi·∫£i ph√°p:**

```bash
# Clear browser cache
# Hard reload: Ctrl + Shift + R (Windows) / Cmd + Shift + R (Mac)

# Rebuild frontend
npx nx build twenty-front

# Restart dev server
npx nx start twenty-front
```

---

## üìä **MENU RENDERING FLOW**

```
1. MainNavigationDrawer.tsx
   ‚Üì
2. Fixed Items (Top)
   - Search
   - Ask AI (if enabled)
   - Settings
   ‚Üì
3. Scrollable Items
   ‚Üì
   3.1. NavigationDrawerOpenedSection
        - Current object (if not in favorites)
   ‚Üì
   3.2. CurrentWorkspaceMemberFavoritesFolders
        - Favorite folders with nested items
   ‚Üì
   3.3. WorkspaceFavorites
        - Favorite views/records
        - Rendered via NavigationDrawerSectionForObjectMetadataItems
   ‚Üì
   3.4. NavigationDrawerSectionForObjectMetadataItems (WORKSPACE)
        ‚îú‚îÄ‚îÄ Standard Objects (ORDERED_STANDARD_OBJECTS)
        ‚îÇ   1. Person
        ‚îÇ   2. Company
        ‚îÇ   3. Opportunity
        ‚îÇ   4. Task
        ‚îÇ   5. Note
        ‚îî‚îÄ‚îÄ Custom Objects (by createdAt DESC)
   ‚Üì
   3.5. RemoteNavigationDrawerSection
        - Remote objects from integrations
   ‚Üì
4. Fixed Items (Bottom)
   - Support dropdown
```

**Data Sources:**

- **ObjectMetadata** (database) ‚Üí Object list
- **Favorite** (database) ‚Üí Favorite items
- **View** (database) ‚Üí Views per object
- **ORDERED_STANDARD_OBJECTS** (frontend constant) ‚Üí Order

---

## üìö **RELATED FILES**

| File | Purpose |
|------|---------|
| `MainNavigationDrawer.tsx` | Main wrapper component |
| `MainNavigationDrawerFixedItems.tsx` | Top fixed items (Search, AI, Settings) |
| `MainNavigationDrawerScrollableItems.tsx` | Dynamic scrollable section |
| `NavigationDrawerSectionForObjectMetadataItems.tsx` | Object list renderer + ORDER config |
| `NavigationDrawerItemForObjectMetadataItem.tsx` | Individual object item with views |
| `WorkspaceFavorites.tsx` | Favorites section |
| `favorite.workspace-entity.ts` | Favorite database model |
| `object-metadata.entity.ts` | Object metadata database model |

---

## ‚úÖ **QUICK CHECKLIST**

### **ƒê·ªÉ th√™m item v√†o menu:**

- [ ] **Custom Object:** T·∫°o WorkspaceEntity ‚Üí sync metadata
- [ ] **Fixed Item:** S·ª≠a `MainNavigationDrawerFixedItems.tsx`
- [ ] **Custom Section:** S·ª≠a `MainNavigationDrawerScrollableItems.tsx`
- [ ] **Favorite:** T·∫°o favorite qua UI ho·∫∑c API

### **ƒê·ªÉ thay ƒë·ªïi order:**

- [ ] S·ª≠a `ORDERED_STANDARD_OBJECTS` trong `NavigationDrawerSectionForObjectMetadataItems.tsx`
- [ ] Rebuild frontend

### **ƒê·ªÉ ·∫©n item:**

- [ ] Set `isActive = false` trong database
- [ ] Ho·∫∑c filter trong frontend code

---

## üéØ **USE CASES**

### **1. Th√™m "Products" object v√†o menu**

```typescript
// Backend: product.workspace-entity.ts
@WorkspaceEntity({
  standardId: 'product-uuid',
  namePlural: 'products',
  labelPlural: msg`Products`,
  icon: 'IconPackage',
})
export class ProductWorkspaceEntity extends BaseWorkspaceEntity {}
```

```bash
npx nx run twenty-server:command workspace:sync-metadata
```

‚Üí T·ª± ƒë·ªông xu·∫•t hi·ªán!

### **2. Reorder: Companies l√™n ƒë·∫ßu**

```typescript
// Frontend: NavigationDrawerSectionForObjectMetadataItems.tsx
const ORDERED_STANDARD_OBJECTS: string[] = [
  CoreObjectNameSingular.Company,     // ‚Üê L√™n ƒë·∫ßu
  CoreObjectNameSingular.Person,
  CoreObjectNameSingular.Opportunity,
  CoreObjectNameSingular.Task,
  CoreObjectNameSingular.Note,
];
```

### **3. Th√™m "Reports" fixed item**

```typescript
// Frontend: MainNavigationDrawerFixedItems.tsx
<NavigationDrawerItem
  label={t`Reports`}
  Icon={IconChartBar}
  to="/reports"
  keyboard={['R']}
/>
```

### **4. Favorite top 5 customers**

```bash
# Via GraphQL API
for each customer in top5:
  createOneFavorite({
    companyId: customer.id,
    position: index,
    forWorkspaceMemberId: currentUser.id
  })
```

---

**T·∫°o b·ªüi:** Claude Code
**Ng√†y:** 2025-11-13
**Version:** 1.0
